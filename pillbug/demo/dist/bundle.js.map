{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./demo/src/index.js","webpack:///./demo/src/menu.js","webpack:///./demo/src/modal-container.js","webpack:///./demo/src/modal-yes-no.js","webpack:///./demo/src/page-container.js","webpack:///./src/pillbug.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;AClFe;AACf;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,+FAAuC;AACvC;AACA,KAAK,EAAE;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;;AAEA,Q;;;;;;;;;;;;;;;ACtCgB;;AAEhB;AACA;AACA,6CAA6C,4BAA4B,yBAAyB;AAClG,mCAAmC,SAAS,eAAe,yBAAyB,yBAAyB;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,SAAS,iBAAiB;AAClD;AACA;AACA,MAAM;AACN;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA,C;;;;;;;;;;;;;;;AC9BgB;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,C;;;;;;;;;;;;;;;ACrBgB;;;AAGhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iCAAiC,mCAAmC;AACpE,qCAAqC,+CAA+C;AACpF;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;;;;;;;;;;;;;;ACjCgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;ACPA;AAAA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./demo/src/index.js\");\n","import {App, h} from '../../src/pillbug.js';\nimport Menu from './menu';\nimport ModalContainer from './modal-container';\nimport PageContainer from './page-container';\nimport ModalYesNo from './modal-yes-no';\n\nconst c = console;\n\nconst a = new App()\n\na.load = function() {\n  this.menu = new Menu(this)\n  let myModal = \n  this.pageContainer = new PageContainer(this, h('div').inner([\n    h('span').text('hello'),\n    h('button').text('show modal').on({click: e => this.showModal(new ModalYesNo(this)).then(r => {\n      c.log(r)\n    })}),\n    ]))\n  this.modalContainer = new ModalContainer(this)\n}\n\na.goto = function(route) {\n  c.log(this)\n  c.log(route)\n  //get translate into url so I get back functionality..\n  let page = h('div').text(route)\n  this.emit('goto', page)\n}\n\n\n\n\na.showModal = function(modal) {\n  this.modalContainer.showModal(modal)\n  return modal.promise\n}\n\na.load()","import {View, h} from '../../src/pillbug.js';\n\nexport default class Menu extends View {\n  draw(s,h,v,a,p,k) {\n    let showMenuBtn = h('span').html('&#9776;').class('menu-button').on({click: e => s.showMenu()})\n    let hideMenuBtn = h('a').atts({href:\"#\"}).html('&times;').class('closebtn').on({click: e => s.hideMenu()})\n    s.menuDiv = h('div').id('menu').class('overlay').inner([\n      hideMenuBtn,\n      h('div').class('overlay-content').inner([\n        s.getMenuEntry(a, h, 'Page1', 'page1'),\n        s.getMenuEntry(a, h, 'Page2', 'page2')\n        ])\n      ])\n    s.setRoot(h('#menu-container')).inner([\n      s.menuDiv, \n      showMenuBtn\n      ])\n  }\n  getMenuEntry(a, h, text, route) {\n    return h('a').atts({href:\"#\"}).text(text).on({click: e => {\n      this.hideMenu()\n      a.goto(route)\n    }})\n  }\n  showMenu() {\n    this.menuDiv.atts({style: 'width: 70%'})\n  }\n  hideMenu() {\n    this.menuDiv.atts({style: 'width: 0'})\n  }\n}","import {View, h} from '../../src/pillbug.js';\n\nexport default class ModalContainer extends View {\n  draw(s,h,v,a,p,k) {\n    s.setRoot(h('#modal-container'))\n  }\n  showModal(modal) {\n    let p = new Promise((resolve, reject) => {\n      modal.promise\n        .then(result => {          \n          this.root.clear()\n          resolve(result)\n        })\n        .catch(error => {\n          this.root.clear()\n          reject(error)\n        })\n      })\n    this.root.inner(modal)\n    return p\n  }\n}","import {View, h} from '../../src/pillbug.js';\n\n\nclass Modal extends View {\n  draw(s,h,v,a,p,k) {\n    s.setRoot(h('div').class('modal-background').on({\n      click: e => {\n        if (e.target == s.el) {\n          s.rejectModal('user-cancelled')\n        }\n      }\n    }))\n    let content = h('div').class('modal-content modal-animate').inner([\n      h('button').text('OK').on({click: e => this.resolveModal(222)}),\n      h('button').text('Cancel').on({click: e => this.rejectModal('user-cancelled')}),\n    ])\n    s.root.inner(content)\n    s.promise = new Promise((resolve, reject) => {\n      this._resolveFn = resolve\n      this._rejectFn = reject\n    })\n  }\n  resolveModal(data) {\n    this._resolveFn(data)\n  }\n  rejectModal(data) {\n    this._rejectFn(data)\n  }\n}\n\n\nexport default class ModalYesNo extends Modal {\n\n}\n","import {View, h} from '../../src/pillbug.js';\n\nexport default class PageContainer extends View {\n  draw(s,h,v,a,p,k) {\n    s.setRoot(h('#page-container')).inner(p)\n    a.on('goto', page => s.root.inner(page))\n  }\n}","const c = console\n\n\nexport class App {\n  constructor() {\n    this._register = {}\n  }\n  _getWatchList(event) {\n    let watchers = this._register[event]\n    if (watchers == undefined) {\n      watchers = []\n      this._register[event] =  watchers\n    }\n    return watchers\n  }\n  emit(event, data) {\n    this._getWatchList(event).forEach(w => w(data))\n  }\n  on(event, callback) {\n    this._getWatchList(event).push(callback)\n  }\n}\n\n\nexport class View {\n  constructor(app, props, key) {\n    this._app = app\n    this._vCache = {}\n    this._matchers = {}\n    this._prevState = {}\n    this.v = this._getView.bind(this)\n    this.draw(this, h, this.v, app, props, key)\n  }\n  setRoot(el) {\n    if (el instanceof NodeWrapper || el instanceof View) {\n      this.root = el\n      this.el = el.el\n    } else {\n      throw new TypeError(\"View.setRoot() only accepts types: NodeWrapper, View\")\n    }\n    return el\n  }\n  match(prop, fn) {\n    if (!this._matchers.hasOwnProperty(prop)) {\n      this._matchers[prop] = []\n    }\n    this._matchers[prop].push(fn)\n  }\n  update(s,h,v,a,p,k) {\n    for (let prop in this._matchers) {\n      let value = p[prop];\n      if (this._prevState[prop] !== value) {\n        let fnList = this._matchers[prop];\n        fnList.forEach(fn => {\n          fn(value)\n        })\n      }\n      this._prevState[prop] = value\n    }\n  }\n  _getView(cls, props, key) {\n    if (key == undefined) {\n      return new cls(this._app, props)\n    }\n    let className = cls.name;\n    if (!this._vCache.hasOwnProperty(className)) {\n      this._vCache[className] = {}\n    }\n    let cacheForType = this._vCache[className];\n    if (cacheForType.hasOwnProperty(key)) {\n      let view = cacheForType[key]\n      view.update(this, h, this.v, this._app, props, key)\n      return view\n    } else {\n      let view = new cls(this._app, props, key)\n      view.update(this, h, this.v, this._app, props, key)\n      cacheForType[key] = view\n      return view\n    }\n  }\n}\n\n\nexport function h(tag) {\n  return new NodeWrapper(tag)\n}\n\n\nexport class NodeWrapper {\n  constructor(tag) {\n    if (tag.startsWith('#')) {\n      this.el = document.getElementById(tag.substr(1))\n    } else {\n      this.el = document.createElement(tag)\n    }\n  }\n  atts(atts) {\n    for (let key in atts) {\n      //Todo, check if different, and remove uneeded\n      this.el.setAttribute(key, atts[key])\n    }\n    return this\n  }\n  class(className) {\n    /*\n    classList.add(\"mystyle\")\n    element.classList.toggle(\"mystyle\")\n    .remove(\"mystyle\")\n    */\n    this.el.className = className\n    return this\n  }\n  clear() {\n    this.el.innerHTML = ''\n    return this\n  }\n  on(listeners) {\n    for (let key in listeners) {\n      this.el.addEventListener(key, listeners[key])\n    }\n    return this\n  }\n  id(id) {\n    this.el.id = id\n    return this\n  }\n  inner(inner) {\n    this.el.innerHTML = ''\n    if (!Array.isArray(inner)) {\n      inner = [inner]\n    }\n    let fragment = document.createDocumentFragment()\n    inner.forEach(child => {\n      if (child instanceof NodeWrapper || child instanceof View) {\n        fragment.appendChild(child.el)\n      } else if (child instanceof Node) {\n        fragment.appendChild(child)\n      } else {\n        fragment.appendChild(document.createTextNode(child.toString()))\n      }\n    })\n    this.el.appendChild(fragment)\n    return this\n  }\n  html(html) {\n    this.el.innerHTML = html\n    return this\n  }\n  text(text) {\n    this.el.textContent = text\n    return this\n  }\n}\n\n\n\n\n/*\n\nconst pillbug = {}\n\npillbug.App = App\npillbug.h = h\npillbug.View = View\npillbug.NodeWrapper = NodeWrapper\npillbug.version = '0.0.1'\nmodule.exports = pillbug\n\n*/\n\n/*\n\n\nfunction htmlToElement(html) {\n  var template = createElement('template');\n  html = html.trim(); // Never return a text node of whitespace as the result\n  template.innerHTML = html;\n  return template.content.firstChild;\n}\n\n*/\n\n"],"sourceRoot":""}