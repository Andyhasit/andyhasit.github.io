{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./demo/src/index.js","webpack:///./demo/src/menu.js","webpack:///./demo/src/modal-yes-no.js","webpack:///./demo/src/page-container.js","webpack:///./src/pillbug.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;AClFqB;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,KAAK,8BAA8B;AACnC,KAAK,6BAA6B;AAClC,KAAK,8BAA8B;AACnC;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,gCAAgC;AACnD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,GAAG;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kBAAkB,SAAS;AAC3B,mBAAmB,SAAS;AAC5B,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;;;;;;;;;;;;;;;;;AC5KgB;;;AAGhB;AACA;AACA,6CAA6C;AAC7C,mCAAmC,SAAS,eAAe;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA,KAAK;AACL;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA,C;;;;;;;;;;;;;;;AC/BiB;;;AAGjB;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,8BAA8B;AAC/D,qCAAqC,uCAAuC;AAC5E;AACA;AACA;;;;;;;;;;;;;;;;ACbgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;ACPA;AAAA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uB;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./demo/src/index.js\");\n","import {App, h, View} from '../../src/pillbug.js';\nimport Menu from './menu';\n//import ModalContainer from './modal-container';\nimport PageContainer from './page-container';\nimport ModalYesNo from './modal-yes-no';\n\nconst c = console;\n\nconst app = new App(h('#modal-container'))\n\n/*\napp.appView('menu', Menu)\napp.appView(Menu)\n\nh('#modal-container')\n\n\n\napp.showModal = function(modal) {\n  this.modalContainer.showModal(modal)\n  return modal.promise\n\n}\n\n*/\n\napp.todos = [\n    {id: 1, text: 'A', done: false},\n    {id: 2, text: 'B', done: true},\n    {id: 3, text: 'C', done: false},\n];\napp._nextId = app.todos.length;\n\napp.addTodo = function(text) {\n  this._nextId ++\n  let id = this._nextId\n  this.todos.push({id: id, text: text, done: false})\n  this.emit('todos-changed', this.todos)\n}\n\napp.checkTodo = function(todo, done) {\n  todo.done = done\n  this.emit('todos-changed', this.todos)\n}\n\nclass MyView extends View {\n  draw(h) {\n    this.inpval = ''\n    this.clickCount = 0\n    this.counterEl = h('span').text(0);\n    let div = h('#my-div').inner([\n      h('span').text('You clicked me: '),\n      this.counterEl,\n      h('span').text(' times!'),\n      h('br'),\n      h('button').text('Click me').on('click', e => this._buttonClicked()),\n      //h('input').bind(this, 'inpval', e=> c.log(e))\n      h('input').on('keypress', e=> c.log(e))\n    ]);\n    this.wrap(div)\n  }\n  _buttonClicked() {\n    this.clickCount ++;\n    this.counterEl.text(this.clickCount)\n  }\n}\n\n\nclass TodoListView extends View {\n  draw(h,v,a,p,k,s) {\n    s.addTodoText = ''\n    s.todoUL = h('ul')\n    s.countEl = h('span')\n    a.on('todos-changed', data => s.todosChanged(h,v,a,p,k,s))\n    s.drawView(h,v,a,p,k,s)\n  }\n  todosChanged(h,v,a,p,k,s) {\n    s.updateCount(h,v,a,p,k,s)\n    s.redrawList(h,v,a,p,k,s)\n  }\n  updateCount(h,v,a,p,k,s) {\n    s.countEl.text(a.todos.length)\n  }\n  drawView(h,v,a,p,k,s) {\n    h('#my-div').inner([\n      s.countEl,\n      h('input').on('change', e=> s.addTodoText = e.target.value),\n      h('button').text('add').on('click', e => a.addTodo(s.addTodoText)),\n      s.todoUL\n    ])\n    s.todosChanged(h,v,a,p,k,s)\n  }\n  redrawList(h,v,a,p,k,s) {\n    s.todoUL.inner(a.todos.map(todo => v(TodoLi, todo, todo.id)))\n  }\n}\n\n\nclass TodoLi extends View {\n  draw(h,v,a,p,k,s) {\n    let textEl = h('span')\n    let btnEl = h('input').atts({type: 'checkbox'})\n    .on('change', e => {\n      a.checkTodo(p, e.target.checked)\n    })\n    s.wrap(h('li').inner([textEl, btnEl]))\n    s.match('text', val => textEl.text(val))\n    s.match('done', val => btnEl.checked(val))\n  }\n}\n\n\nnew TodoListView(app)\n\n\n\nclass Router {\n  constructor() {\n    this.routes = [];\n    window.addEventListener('hashchange', e => this.hashChanged(88))\n    //window.addEventListener('load', router);\n  }\n  hashChanged(e) {\n    //identify \n    c.log(999)\n    let url = location.hash.slice(1) || '/';\n    c.log(url)\n  }\n}\n\nr = new Route('todos/{id}?name,age')// ?foo=lorem&foo=ipsum)\n\nfunction getParameterByName(name, url) {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\n\napp.load = function() {\n  this.menu = new Menu(this)\n  /*let myModal = \n  this.pageContainer = new PageContainer(this, h('div').inner([\n    h('span').text('hello'),\n    h('button').text('show modal').on({click: e => this.showModal(new ModalYesNo(this))\n      .then(r => {c.log(r)})\n      .catch(e => {c.log(e)})\n    }),\n    ]))\n  */\n\n  const router = new Router()\n}\n\napp.goto = function(route) {\n\n  c.log(route)\n  //get translate into url so I get back functionality..\n  let page = h('div').text(route)\n  this.emit('goto', page)\n}\n\napp.load()\n\n\n\n\n//c.log(router.hashChanged())\n//window.addEventListener('hashchange', e=> router.hashChanged())\n\n","import {View, h} from '../../src/pillbug.js';\n\n\nexport default class Menu extends View {\n  draw(h,v,a,p,k,s) {\n    let showMenuBtn = h('span').html('&#9776;').class('menu-button').on('click', e => s.showMenu())\n    let hideMenuBtn = h('a').atts({href:\"#\"}).html('&times;').class('closebtn').on('click', e => s.hideMenu())\n    s.menuDiv = h('div').id('menu').class('overlay').inner([\n      hideMenuBtn,\n      h('div').class('overlay-content').inner([\n        s.getMenuEntry(a, h, 'Page1', 'page1'),\n        s.getMenuEntry(a, h, 'Page2', 'page2')\n        ])\n      ])\n    s.wrap(h('#menu-container')).inner([\n      s.menuDiv, \n      showMenuBtn\n      ])\n  }\n  getMenuEntry(a, h, text, route) {\n    return h('a').atts({href:\"#/\" + route}).text(text).on('click', e => {\n      this.hideMenu()\n      //a.goto(route)\n    })\n  }\n  showMenu() {\n    this.menuDiv.atts({style: 'width: 70%'})\n  }\n  hideMenu() {\n    this.menuDiv.atts({style: 'width: 0'})\n  }\n}","import {Modal, h} from '../../src/pillbug.js';\n\n\nexport default class ModalYesNo extends Modal {\n  overlay(h,v,a,p,k,s) {\n    return h('div').class('modal-background')\n  }\n  content(h,v,a,p,k,s) {\n    return h('div').class('modal-content modal-animate').inner([\n      h('button').text('OK').on({click: e => s.resolve(222521)}),\n      h('button').text('Cancel').on({click: e => s.reject('user-cancelled')}),\n    ])\n  }\n}\n","import {View, h} from '../../src/pillbug.js';\n\nexport default class PageContainer extends View {\n  draw(h,v,a,p,k) {\n    this.wrap(h('#page-container')).inner(p)\n    a.on('goto', page => this.root.inner(page))\n  }\n}","/*\nPillbug version 0.0.1\n\n\n*/\n\nexport class App {\n  constructor(modalContainer) {\n    this._modalContainer = modalContainer\n    this._eventWatchers = {}\n    this._views = {}\n  }\n  addView(name, cls, el) {\n    this._views[name] = new cls(this, el)\n  }\n  showModal(modal) {\n    this._modalContainer.inner(modal)\n    return modal.promise\n      .then(result => {          \n        this._modalContainer.clear()\n        return result\n      })\n      .catch(error => {\n        this._modalContainer.clear()\n        return error\n      })\n  }\n  emit(event, data) {\n    this._watchers(event).forEach(w => w(data))\n  }\n  on(event, callback) {\n    this._watchers(event).push(callback)\n  }\n  _watchers(event) {\n    let watchers = this._eventWatchers[event]\n    if (watchers == undefined) {\n      watchers = []\n      this._eventWatchers[event] =  watchers\n    }\n    return watchers\n  }\n}\n\n\nexport class View {\n  constructor(app, props, key) {\n    this._app = app\n    this._key = key\n    this._vCache = {}\n    this._matchers = {}\n    this._vals = {}\n    this.v = this._view.bind(this)\n    this.draw(h, this.v, app, props, key, this)\n  }\n  wrap(v) {\n    /*\n    if (el instanceof NodeWrapper || el instanceof View) {\n      this.root = el\n      this.el = el.el\n    } else {\n      throw new TypeError(\"View.wrap() only accepts types: NodeWrapper, View\")\n    }\n    */\n    this.root = v\n    this.el = v.el\n    return v\n  }\n  match(prop, fn) {\n    if (!this._matchers.hasOwnProperty(prop)) {\n      this._matchers[prop] = []\n    }\n    this._matchers[prop].push(fn)\n  }\n  update(props) {\n    this._update(h, this.v, this._app, props, this._key, this)\n  }\n  _update(h,v,a,p,k,s) {\n    for (let prop in s._matchers) {\n      let val = p[prop];\n      if (s._vals[prop] !== val) {\n        s._matchers[prop].forEach(fn => {\n          fn(val, p)\n        })\n      }\n      s._vals[prop] = val\n    }\n  }\n  _view(cls, props, key) {\n    let view;\n    if (key == undefined) {\n      view = new cls(this._app, props)\n    } else {\n      let className = cls.name;\n      if (!this._vCache.hasOwnProperty(className)) {\n        this._vCache[className] = {}\n      }\n      let cacheForType = this._vCache[className];\n      if (cacheForType.hasOwnProperty(key)) {\n        view = cacheForType[key]\n      } else {\n        view = new cls(this._app, props, key)\n        cacheForType[key] = view\n      }\n    }\n    view.update(props)\n    return view\n  }\n}\n\n\nexport class Modal extends View {\n  draw(h,v,a,p,k,s) {\n    s.wrap(s.overlay(h,v,a,p,k,s).on({\n      click: e => {\n        if (e.target == s.el) {\n          s.reject('user-cancelled')\n        }\n      }\n    }))\n    s.promise = new Promise((resolve, reject) => {\n      s.resolve = resolve\n      s.reject = reject\n    })\n    s.root.inner(s.content(h,v,a,p,k,s))\n  }\n}\n\n\nexport function h(tag) {\n  return new NodeWrapper(tag)\n}\n\n\nexport class NodeWrapper {\n  constructor(tag) {\n    if (tag.startsWith('#')) {\n      this.el = document.getElementById(tag.substr(1))\n    } else {\n      this.el = document.createElement(tag)\n    }\n  }\n  atts(atts) {\n    for (let key in atts) {\n      this.el.setAttribute(key, atts[key])\n    }\n    return this\n  }\n  checked(val) {\n    this.el.checked = val\n    return this\n  }\n  class(className) {\n    /*\n    classList.add(\"mystyle\")\n    element.classList.toggle(\"mystyle\")\n    .remove(\"mystyle\")\n    */\n    this.el.className = className\n    return this\n  }\n  clear() {\n    this.el.innerHTML = ''\n    return this\n  }\n  on(event, callback) {\n    this.el.addEventListener(event, callback)\n    return this\n  }\n  id(id) {\n    this.el.id = id\n    return this\n  }\n  inner(inner) {\n    this.el.innerHTML = ''\n    if (!Array.isArray(inner)) {\n      inner = [inner]\n    }\n    let fragment = document.createDocumentFragment()\n    inner.forEach(child => {\n      if (child instanceof NodeWrapper || child instanceof View) {\n        fragment.appendChild(child.el)\n      } else if (child instanceof Node) {\n        fragment.appendChild(child)\n      } else {\n        fragment.appendChild(document.createTextNode(child.toString()))\n      }\n    })\n    this.el.appendChild(fragment)\n    return this\n  }\n  html(html) {\n    this.el.innerHTML = html\n    return this\n  }\n  text(text) {\n    this.el.textContent = text\n    return this\n  }\n}\n"],"sourceRoot":""}