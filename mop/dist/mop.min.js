var mop=function(){function t(t){return document.createElement(t)}class e{constructor(t){this._data=t,this._dirty=!0,this._childBoxes=[],this._boxCache={}}static getKey(){return this.singleton?"singleton":void 0!==this.trackBy&&arguments.length>0?arguments[0][this.trackBy]:void 0}push(t){this._data=t,this._dirty=!0}flush(t){(t||this._dirty)&&this._redraw(),this._childBoxes.forEach(function(t){t.flush()})}_redraw(){let e=this.render();void 0==this.element&&(this.element=t(e.tag)),this._childBoxes.length=0,this._updateNode(this.element,e,this._childBoxes),this._dirty=!1}_updateNode(i,s,r){let h=s.inner;if(this._updateElement(i,s.atts),s.listeners&&this._updateListeners(i,s.listeners),Array.isArray(h))this._updateChildren(i,h,r);else if(h instanceof e)this._handleInnderBox(h,r),i.appendChild(h.element);else if(h instanceof n){let e=t(h.tag);this._updateNode(e,h,r),i.innerHTML="",i.appendChild(e)}else if(void 0!==h){let t=i.innerHTML,e="string"==typeof h?h:h.toString();t!==e&&(i.innerHTML=e)}}_handleInnderBox(t,e){void 0==t.element?t._redraw():e.push(t)}_updateChildren(i,s,r){let h=document.createDocumentFragment();s.forEach(i=>{let s;i instanceof e?(this._handleInnderBox(i,r),s=i.element):i instanceof n?(s=t(i.tag),this._updateNode(s,i,r)):(s=t("div")).innerHTML=i,h.appendChild(s)}),i.innerHTML="",i.appendChild(h)}_updateElement(t,e){for(let i in e)t.setAttribute(i,e[i])}_updateListeners(t,e){for(let i in e)t.addEventListener(i,e[i])}_addCache(t,e){this._boxCache[t.name]={getKey:function(){},boxes:{}}}_(t,...e){let i=t.name,n=t.getKey.apply(t,e);if(void 0==n)return new t(...e);this._boxCache.hasOwnProperty(i)||(this._boxCache[i]={});let s=this._boxCache[i];if(s.hasOwnProperty(n)){let t=s[n];return t.push.apply(t,e),t}{let i=new t(...e);return i._key=n,s[n]=i,i}}}class i extends e{constructor(t){super(),this._id=t,this.element=document.getElementById(t)}}class n{constructor(t,e,i,n){this.tag=t.toUpperCase(),this.inner=i,this.atts=e,this.listeners=n}}const s={Box:e,ModalContainer:class extends i{render(){return this._currentModal?h.div({id:"modal-container",style:"display: block;"},this._currentModal):h.div({id:"modal-container",style:"display: hidden;"},"")}showModal(t,e){return this._currentModal=this._(t,e),this._redraw(),new Promise((t,e)=>{this._currentModal.promise.then(e=>{this._currentModal=void 0,this._redraw(),t(e)}).catch(t=>{this._currentModal=void 0,this._redraw(),e(t)})})}},TopLevelContainer:i,ViewModel:class{constructor(t){for(var e in this._watchers=[],this._changes=[],t)this[e]=t[e]}flush(){var t=this;this._watchers.forEach(function(e){e.push(t),e.flush()}),this._changes.length=[]}action(t,e){this[t]=function(){let t=e.apply(this,arguments);return this.flush(),t}}bind(t,e){var i=new t(this);i.element=document.getElementById(e),this._watchers.push(i)}},addTags:function(t){let e=this.html;t.forEach(function(t){e[t]=function(e,i,s){return new n(t,e,i,s)}})},html:{}};return s.addTags("a b button br div form h1 h2 h3 h4 h5 li i img input label p section span table td th tr ul".split(" ")),s}();