var mop=function(){function t(t){return document.createElement(t)}class e{constructor(t){this._data=t,this._dirty=!0,this._childBoxes=[],this._boxCache={}}static getKey(){return this.singleton?"singleton":void 0!==this.trackBy&&arguments.length>0?arguments[0][this.trackBy]:void 0}push(t){this._data=t,this._dirty=!0}flush(t){(t||this._dirty)&&this._redraw(),this._childBoxes.forEach(function(t){t.flush()})}_redraw(){let e=this.render();void 0==this.element&&(this.element=t(e.tag)),this._childBoxes.length=0,this._updateNode(this.element,e,this._childBoxes),this._dirty=!1}_updateNode(t,n,s){let h=n.inner;if(this._updateElement(t,n.atts),n.listeners&&this._updateListeners(t,n.listeners),Array.isArray(h))this._updateChildren(t,h,s);else if(h instanceof e)this._handleInnderBox(h,s),t.appendChild(h.element);else if(void 0!==h&&h instanceof i)this._updateNode(t,h,s);else if(t.innerHTML!==h){t.innerHTML;t.innerHTML=h}}_handleInnderBox(t,e){void 0==t.element?t._redraw():e.push(t)}_updateChildren(n,s,h){let r=document.createDocumentFragment();s.forEach(n=>{let s;n instanceof e?(this._handleInnderBox(n,h),s=n.element):n instanceof i?(s=t(n.tag),this._updateNode(s,n,h)):(s=t("div")).innerHTML=n,r.appendChild(s)}),n.innerHTML="",n.appendChild(r)}_updateElement(t,e){for(let i in e)t.setAttribute(i,e[i])}_updateListeners(t,e){for(let i in e)t.addEventListener(i,e[i])}_addCache(t,e){this._boxCache[t.name]={getKey:function(){},boxes:{}}}_(t,...e){let i=t.name,n=t.getKey.apply(t,e);if(void 0==n)return new t(...e);this._boxCache.hasOwnProperty(i)||(this._boxCache[i]={});let s=this._boxCache[i];if(s.hasOwnProperty(n)){let t=s[n];return t.push.apply(t,e),t}{let i=new t(...e);return i._key=n,s[n]=i,i}}}class i{constructor(t,e,i,n){this.tag=t.toUpperCase(),this.inner=i,this.atts=e,this.listeners=n}}const n={Box:e,ViewModel:class{constructor(t){for(var e in this._watchers=[],this._changes=[],t)this[e]=t[e]}flush(){var t=this;this._watchers.forEach(function(e){e.push(t),e.flush()}),this._changes.length=[]}action(t,e){this[t]=function(){e.apply(this,arguments),this.flush()}}bind(t,e){var i=new t(this);i.element=document.getElementById(e),this._watchers.push(i)}},addTags:function(t){let e=this.html;t.forEach(function(t){e[t]=function(e,n,s){return new i(t,e,n,s)}})},html:{}};return n.addTags("a b button br div h1 h2 h3 h4 h5 li i img input p section span table td th tr ul".split(" ")),n}();