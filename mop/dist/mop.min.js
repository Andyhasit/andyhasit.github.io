var mop=function(){function t(t){return document.createElement(t)}class e{constructor(t,e,i,s){this.tag=t.toUpperCase(),this.inner=i,this.atts=e,this.listeners=s}}class i{constructor(t){this._data=t,this._dirty=!0,this._childBoxes=[],this._boxCache={}}static getKey(){return this.singleton?"singleton":void 0!==this.trackBy&&arguments.length>0?arguments[0][this.trackBy]:void 0}push(t){t!=t&&(this._dirty=!0),this._dirty=!0,this._data=t}flush(t){c.log(this),(t||this._dirty)&&this._redraw(),this._childBoxes.forEach(function(t){t.flush()})}_redraw(){c.log(this);let e=this.render();void 0==this.element&&(this.element=t(e.tag)),this._childBoxes.length=0,this._updateNode(this.element,e,this._childBoxes),this._dirty=!1}_updateNode(s,n,r){this._updateElement(s,n.atts),n.listeners&&this._updateListeners(s,n.listeners);let h=n.inner;if(c.log(typeof h),Array.isArray(h))this._processArray(s,h,r);else if(h instanceof i)this._processBox(h,r),s.appendChild(h.element);else if(h instanceof e){let e=t(h.tag);this._updateNode(e,h,r),s.innerHTML="",s.appendChild(e)}else if(void 0!==h){let t=s.innerHTML,e="string"==typeof h?h:h.toString();t!==e&&(s.innerHTML=e)}}_processBox(t,e){void 0==t.element?t._redraw():e.push(t)}_processArray(s,n,r){c.log(s.path);let h=document.createDocumentFragment();n.forEach(s=>{let n;s instanceof i?(this._processBox(s,r),n=s.element):s instanceof e?(n=t(s.tag),this._updateNode(n,s,r)):(n=t("div")).innerHTML=s,h.appendChild(n)}),s.innerHTML="",s.appendChild(h)}_updateElement(t,e){for(let i in e)t.setAttribute(i,e[i])}_updateListeners(t,e){for(let i in e)t.addEventListener(i,e[i])}_addCache(t,e){this._boxCache[t.name]={getKey:function(){},boxes:{}}}_(t,...e){let i=t.name,s=t.getKey.apply(t,e);if(void 0==s)return new t(...e);this._boxCache.hasOwnProperty(i)||(this._boxCache[i]={});let n=this._boxCache[i];if(n.hasOwnProperty(s)){let t=n[s];return t.push.apply(t,e),t}{let i=new t(...e);return i._key=s,n[s]=i,i}}}class s extends i{constructor(t){super(),this._id=t,this.element=document.getElementById(t)}}class n extends s{render(){return this._currentModal?h.div({id:"modal-container",style:"display: block;"},this._currentModal):h.div({id:"modal-container",style:"display: hidden;"},"")}showModal(t,e){return this._currentModal=this._(t,e),this._redraw(),new Promise((t,e)=>{this._currentModal.promise.then(e=>{this._currentModal=void 0,this._redraw(),t(e)}).catch(t=>{this._currentModal=void 0,this._redraw(),e(t)})})}}const r=new class extends i{constructor(){super(),this.html={},this.Box=i,this.ModalContainer=n,this.TopLevelContainer=s}flush(t){this._redraw(),this._childBoxes.forEach(function(t){t.flush()})}addTags(t){let i=this.html;t.forEach(function(t){i[t]=function(i,s,n){return new e(t,i,s,n)}})}action(t,e){let i=this;this[t]=function(){let t=e.apply(i,arguments);return i.flush(),t}}};return r.addTags("a b button br div form h1 h2 h3 h4 h5 li i img input label p section span table td th tr ul".split(" ")),r}();